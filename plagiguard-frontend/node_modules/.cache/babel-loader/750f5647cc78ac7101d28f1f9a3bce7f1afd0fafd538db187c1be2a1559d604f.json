{"ast":null,"code":"import React,{useState}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import api from'../api/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ResetPassword(){const[searchParams]=useSearchParams();const navigate=useNavigate();const[formData,setFormData]=useState({password:'',confirmPassword:''});const[message,setMessage]=useState({text:'',type:''});const[loading,setLoading]=useState(false);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();if(formData.password!==formData.confirmPassword){setMessage({text:'Passwords do not match',type:'danger'});return;}setLoading(true);try{const token=searchParams.get('token');const response=await api.post('/users/reset-password',{token,password:formData.password});setMessage({text:'Password reset successful. You can now login with your new password.',type:'success'});setTimeout(()=>{navigate('/');},3000);}catch(error){var _error$response,_error$response$data;setMessage({text:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to reset password',type:'danger'});}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-primary text-white\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0\",children:\"Set New Password\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[message.text&&/*#__PURE__*/_jsx(\"div\",{className:`alert alert-${message.type}`,role:\"alert\",children:message.text}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"password\",value:formData.password,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"confirmPassword\",value:formData.confirmPassword,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-100\",disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\"}),\"Resetting Password...\"]}):'Reset Password'})]})]})]})})})});}export default ResetPassword;","map":{"version":3,"names":["React","useState","useNavigate","useSearchParams","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResetPassword","searchParams","navigate","formData","setFormData","password","confirmPassword","message","setMessage","text","type","loading","setLoading","handleChange","e","target","name","value","handleSubmit","preventDefault","token","get","response","post","setTimeout","error","_error$response","_error$response$data","data","className","children","role","onSubmit","onChange","required","disabled"],"sources":["C:/Users/hvard/Documents/GitHub/plagiguard/plagiguard-frontend/src/components/ResetPassword.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport api from '../api/api';\r\n\r\nfunction ResetPassword() {\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    password: '',\r\n    confirmPassword: ''\r\n  });\r\n  const [message, setMessage] = useState({ text: '', type: '' });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (formData.password !== formData.confirmPassword) {\r\n      setMessage({\r\n        text: 'Passwords do not match',\r\n        type: 'danger'\r\n      });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const token = searchParams.get('token');\r\n      const response = await api.post('/users/reset-password', {\r\n        token,\r\n        password: formData.password\r\n      });\r\n      \r\n      setMessage({\r\n        text: 'Password reset successful. You can now login with your new password.',\r\n        type: 'success'\r\n      });\r\n      \r\n      setTimeout(() => {\r\n        navigate('/');\r\n      }, 3000);\r\n    } catch (error) {\r\n      setMessage({\r\n        text: error.response?.data?.error || 'Failed to reset password',\r\n        type: 'danger'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className=\"row justify-content-center\">\r\n        <div className=\"col-md-6\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header bg-primary text-white\">\r\n              <h4 className=\"mb-0\">Set New Password</h4>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {message.text && (\r\n                <div className={`alert alert-${message.type}`} role=\"alert\">\r\n                  {message.text}\r\n                </div>\r\n              )}\r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label\">New Password</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    name=\"password\"\r\n                    value={formData.password}\r\n                    onChange={handleChange}\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label\">Confirm New Password</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    name=\"confirmPassword\"\r\n                    value={formData.confirmPassword}\r\n                    onChange={handleChange}\r\n                    required\r\n                  />\r\n                </div>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-primary w-100\"\r\n                  disabled={loading}\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <span className=\"spinner-border spinner-border-sm me-2\" />\r\n                      Resetting Password...\r\n                    </>\r\n                  ) : (\r\n                    'Reset Password'\r\n                  )}\r\n                </button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ResetPassword;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}