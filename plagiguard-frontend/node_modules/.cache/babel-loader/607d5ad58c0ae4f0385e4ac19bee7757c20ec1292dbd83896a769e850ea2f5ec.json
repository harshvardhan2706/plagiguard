{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,Link}from'react-router-dom';import api from'../api/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(){const navigate=useNavigate();const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);useEffect(()=>{// If user is already logged in, redirect to dashboard\nconst user=JSON.parse(localStorage.getItem('user')||'{}');if(user.id){navigate('/dashboard');}},[navigate]);const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{console.log('Attempting login...');const res=await api.post('/api/users/login',{email,password});console.log('Login response:',res.data);if(res.data&&res.data.token){// Store user info\nlocalStorage.setItem('user',JSON.stringify(res.data));localStorage.setItem('userEmail',res.data.email);navigate('/dashboard');}else{var _res$data;console.error('Invalid response format:',res.data);throw new Error(((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.error)||'Invalid response from server: missing token');}}catch(err){var _err$response,_err$response$data;console.error('Login error:',err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message||'Server error. Please try again later.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid min-vh-100 d-flex align-items-center justify-content-center bg-light\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-sm-10 col-md-8 col-lg-6 col-xl-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card shadow border-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-primary mb-4\",children:\"PlagiGuard Login\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",placeholder:\"name@example.com\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-100 py-2 mb-3\",disabled:loading,children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Signing in...\"})]}):'Sign In'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"text-decoration-none text-primary\",children:\"Forgot Password?\"})}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mb-0\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-decoration-none text-primary fw-bold\",children:\"Register here\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"text-muted text-decoration-none\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-left me-1\"}),\"Back to Home\"]})})]})]})})}),/*#__PURE__*/_jsx(\"style\",{children:`\n        .form-floating>.form-control {\n          height: calc(3.5rem + 2px);\n          padding: 1rem 0.75rem;\n        }\n        .btn-primary {\n          background-color: #0D6EFD;\n          border-color: #0D6EFD;\n        }\n        .btn-primary:hover {\n          background-color: #0b5ed7;\n          border-color: #0a58ca;\n        }\n        .alert {\n          border-radius: 0.5rem;\n        }\n      `})]});}export default LoginForm;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Link","api","jsx","_jsx","jsxs","_jsxs","LoginForm","navigate","email","setEmail","password","setPassword","error","setError","loading","setLoading","user","JSON","parse","localStorage","getItem","id","handleSubmit","e","preventDefault","console","log","res","post","data","token","setItem","stringify","_res$data","Error","err","_err$response","_err$response$data","response","message","className","children","role","onSubmit","type","placeholder","value","onChange","target","required","htmlFor","disabled","to"],"sources":["C:/Users/hvard/Documents/GitHub/plagiguard/plagiguard-frontend/src/components/LoginForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport api from '../api/api';\r\n\r\nfunction LoginForm() {\r\n  const navigate = useNavigate();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // If user is already logged in, redirect to dashboard\r\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n    if (user.id) {\r\n      navigate('/dashboard');\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n      try {\r\n      console.log('Attempting login...');\r\n      const res = await api.post('/api/users/login', {\r\n        email,\r\n        password\r\n      });\r\n      \r\n      console.log('Login response:', res.data);\r\n      \r\n      if (res.data && res.data.token) {\r\n        // Store user info\r\n        localStorage.setItem('user', JSON.stringify(res.data));\r\n        localStorage.setItem('userEmail', res.data.email);\r\n        navigate('/dashboard');\r\n      } else {\r\n        console.error('Invalid response format:', res.data);\r\n        throw new Error(res.data?.error || 'Invalid response from server: missing token');\r\n      }\r\n    } catch (err) {\r\n      console.error('Login error:', err);\r\n      setError(\r\n        err.response?.data?.error || \r\n        err.message || \r\n        'Server error. Please try again later.'\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid min-vh-100 d-flex align-items-center justify-content-center bg-light\">\r\n      <div className=\"col-12 col-sm-10 col-md-8 col-lg-6 col-xl-4\">\r\n        <div className=\"card shadow border-0\">\r\n          <div className=\"card-body p-5\">\r\n            <h2 className=\"text-center text-primary mb-4\">PlagiGuard Login</h2>\r\n            \r\n            {error && (\r\n              <div className=\"alert alert-danger\" role=\"alert\">\r\n                {error}\r\n              </div>\r\n            )}\r\n\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"form-floating mb-3\">\r\n                <input\r\n                  type=\"email\"\r\n                  className=\"form-control\"\r\n                  id=\"email\"\r\n                  placeholder=\"name@example.com\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  required\r\n                />\r\n                <label htmlFor=\"email\">Email address</label>\r\n              </div>\r\n\r\n              <div className=\"form-floating mb-4\">\r\n                <input\r\n                  type=\"password\"\r\n                  className=\"form-control\"\r\n                  id=\"password\"\r\n                  placeholder=\"Password\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  required\r\n                />\r\n                <label htmlFor=\"password\">Password</label>\r\n              </div>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-primary w-100 py-2 mb-3\"\r\n                disabled={loading}\r\n              >\r\n                {loading ? (\r\n                  <div className=\"d-flex align-items-center justify-content-center\">\r\n                    <span className=\"spinner-border spinner-border-sm me-2\" />\r\n                    <span>Signing in...</span>\r\n                  </div>\r\n                ) : (\r\n                  'Sign In'\r\n                )}\r\n              </button>\r\n\r\n              <div className=\"text-center\">\r\n                <Link \r\n                  to=\"/forgot-password\" \r\n                  className=\"text-decoration-none text-primary\"\r\n                >\r\n                  Forgot Password?\r\n                </Link>\r\n              </div>\r\n\r\n              <hr className=\"my-4\" />\r\n\r\n              <p className=\"text-center mb-0\">\r\n                Don't have an account?{' '}\r\n                <Link \r\n                  to=\"/register\" \r\n                  className=\"text-decoration-none text-primary fw-bold\"\r\n                >\r\n                  Register here\r\n                </Link>\r\n              </p>\r\n\r\n              <div className=\"text-center mt-3\">\r\n                <Link to=\"/\" className=\"text-muted text-decoration-none\">\r\n                  <i className=\"bi bi-arrow-left me-1\"></i>\r\n                  Back to Home\r\n                </Link>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <style>{`\r\n        .form-floating>.form-control {\r\n          height: calc(3.5rem + 2px);\r\n          padding: 1rem 0.75rem;\r\n        }\r\n        .btn-primary {\r\n          background-color: #0D6EFD;\r\n          border-color: #0D6EFD;\r\n        }\r\n        .btn-primary:hover {\r\n          background-color: #0b5ed7;\r\n          border-color: #0a58ca;\r\n        }\r\n        .alert {\r\n          border-radius: 0.5rem;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}